<ion-header>
  <ion-toolbar>
    <div class="header-content">
      <div>
        <mat-icon aria-hidden="false" class="arrow-back" aria-label="Example home icon"
          [routerLink]="['/', 'home-work-list']">keyboard_backspace</mat-icon>
      </div>
      <div>
        <ion-title>Homework</ion-title>
      </div>
      <div>
        <!-- <ion-buttons slot="end" class="list-bar">
          <ion-button>
            <ion-icon name="search" ></ion-icon>
          </ion-button>
        </ion-buttons>  -->
      </div>
    </div>
  </ion-toolbar>
</ion-header>

<ion-content>
<section class="p-15">
  <div class="work_content">
    <!-- <img src="/assets/images/imgpsh_fullsize_anim.png"> -->
    <div class="title">
      <h1>{{homeworkData?.title}}</h1>
    </div>
    <div class="subject">
      <h1>{{homeworkData?.subject?.subject_name}}</h1>
    </div>
    <div class="created_date">
      <h4>{{homeworkData?.submission_date}}</h4>
    </div>
    <div class="message">
        <p [innerHtml]="homeworkData?.description"></p>
    </div>
    <div class="submission_date">
      <h4>{{homeworkData?.submission_date}}</h4>
    </div>
    <div class="images" *ngIf="imageDatalength!=0">
      <h1>Images :</h1>
      <div class="all_images" [ngClass]="{'bg_color': imageDatalength === 1}">
          <ion-grid>
            <ion-row>
              <ion-col size="6" (click)="openDialogWithoutRef()" *ngFor="let value of imageData | slice:0:4;">
                <ion-card class="block">

                <img src="{{file_url}}{{value!.image_path}}" />
                <div class="more" *ngIf="imageDatalength>4">
                  <span>+{{imageDatalength-4}}</span>
                </div>
                </ion-card>
              </ion-col>
              <!-- <ion-col size="6" (click)="openDialogWithoutRef()">
                <ion-card class="block">
                <img src="/assets/images/pexels-stanley-morales-1454360.jpg" />
                </ion-card>
              </ion-col>
              <ion-col size="6" (click)="openDialogWithoutRef()">
                <ion-card class="block">
                <img src="/assets/images/pexels-pixabay-256374.jpg" />
                </ion-card>
              </ion-col>
              <ion-col size="6" (click)="openDialogWithoutRef()">
                <ion-card class="block">
                <img src="/assets/images/pexels-pixabay-256374.jpg" />
                </ion-card>
                <div class="more" *ngIf="imageDatalength>4">
                  <span>+{{imageDatalength-4}}</span>
                </div>
              </ion-col> -->
            </ion-row>
          </ion-grid>
      </div>
    </div>

    

    <div class="videos" *ngIf="videoDatalength!=0">
      <h1>Videos :</h1>
      <div class="all_Videos">
          <ion-grid>
            <ion-row >
              <ion-col size="12" class="d-none" (click)="openDialog()" *ngFor="let value of videoData;let i = index" [ngClass]="{'d-block': i == videoData.length - 1}">
                <ion-card class="block" >
                  <!-- {{file_url}}/{{value?.image_path}} -->
                  <!-- style="background-image: url(https://www.lalittutorials.com/home_assets/images/logo.jpeg);
                  background-size: cover;background-position: center;" -->
                  <div fxLayout="row wrap" fxLayout.xs="column wrap"   fxLayoutAlign="center center" fxLayoutGap="20px" fxLayoutGap.xs="0px" class="video-flex" [ngClass]="{'transform': videoDatalength == 1}">
                    <h1 class="play-video">Play Video</h1>
                    <span class="play-icon"><img src="/assets/images/play_button.png"></span>
                    <video width="100%" height="100%"   loading="lazy"  style="pointer-events:none;position: absolute;top: 0;left: 0;width: 100%;z-index: -1;"
                        frameborder="1" webkitallowfullscreen mozallowfullscreen allowfullscreen >
                        <source src="{{file_url}}/{{value?.image_path}}" type="video/mp4">
                    </video>
                  </div>
                </ion-card>
                <!-- [ngClass]="{'d_none':value.length == 1}" -->
                <!-- *ngIf="value.length != 1" -->
                <div class="more" [ngClass]="{'d_none': videoDatalength == 1}" >
                  <span>+{{videoData.length}}</span>
                </div>
              </ion-col>
              <!-- <ion-col size="6" (click)="openDialog()">
                <ion-card class="block">
                  <div fxLayout="row wrap" fxLayout.xs="column wrap"  fxLayoutAlign="center center" fxLayoutGap="20px" fxLayoutGap.xs="0px">
                    <iframe style="border: none;" src="https://www.youtube.com/embed/a9__D53WsUs" width="100" height="100" loading="lazy"
                      frameborder="1" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>
                      
                  </div>
                </ion-card>
              </ion-col>
              <ion-col size="6" (click)="openDialog()">
                <ion-card class="block">
                  <div fxLayout="row wrap" fxLayout.xs="column wrap"  fxLayoutAlign="center center" fxLayoutGap="20px" fxLayoutGap.xs="0px">
                    <iframe style="border: none;" src="https://www.youtube.com/embed/a9__D53WsUs" width="100" height="100" loading="lazy"
                      frameborder="1" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe> 
                  </div>
                </ion-card>
              </ion-col>
              <ion-col size="6" (click)="openDialog()">
                <ion-card class="block">
                  <div fxLayout="row wrap" fxLayout.xs="column wrap"  fxLayoutAlign="center center" fxLayoutGap="20px" fxLayoutGap.xs="0px">
                    <iframe style="border: none;" src="https://www.youtube.com/embed/a9__D53WsUs" width="100" height="100" loading="lazy"
                      frameborder="1" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>
                  </div>
                </ion-card>
                <div class="more">
                  <span>+22</span>
                </div>
              </ion-col> -->
            </ion-row>
          </ion-grid>
      </div>
    </div>
  </div>
</section>
<ng-template #secondDialog>
  <div mat-dialog-content>
    <div>
      <ion-grid>
        <ion-row class="ion-justify-content-center">
          <ion-col size="8" *ngFor="let value of imageData; let index=index;">
            <div>
              <img src="{{file_url}}/{{value?.image_path}}" (click)=openDialogImgPreview(value.image_path)/>
            </div>
          </ion-col>
        </ion-row>
      </ion-grid>
    </div>
    
  </div>
  
</ng-template>
<ng-template #imgPreviewDialog>
  <div mat-dialog-content>
    <div class="custom_div">
      <pinch-zoom [properties]="pzProperties" [double-tap]="true">
        <img src="{{file_url}}/{{imgPreviewPath}}"/>
      </pinch-zoom>
    </div>
  </div>
</ng-template>
<ng-template #videoDialog>
  <div mat-dialog-content>
    <div class="custom_div xyz">
    <div *ngFor="let value of videoData" (click)=openDialogVidPreview(value?.image_path) style="height: 150px;padding: 15px 0;">
      <video width="100%" height="100%" controls loading="lazy"  style="pointer-events:none;"
        frameborder="1" webkitallowfullscreen mozallowfullscreen allowfullscreen >
          <source src="{{file_url}}/{{value?.image_path}}" type="video/mp4">
      </video>
    </div>
    </div>
   <!--   <iframe src="https://www.youtube.com/embed/a9__D53WsUs" width="100%" height="200"
        loading="lazy" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen fxFlex="100%"></iframe>
    </div> -->
    
  </div>
  <!-- <div mat-dialog-actions style="justify-content: right;padding: 0 15px 10px 15px;">
      <button mat-button mat-dialog-close>Close</button>
  </div> -->
</ng-template>
<ng-template #vidPreviewDialog>
  <div mat-dialog-content>
    <div class="custom_div p-0">
      <video width="100%" height="200" controls disablepictureinpicture controlslist="nodownload" loading="lazy" class="fix"
      frameborder="1" webkitallowfullscreen mozallowfullscreen allowfullscreen>
        <source src="{{file_url}}/{{vidPreviewPath}}" type="video/mp4" >
     </video>
    </div>
  </div>
  <!-- <div mat-dialog-actions style="justify-content: right;padding: 0 15px 10px 15px;">
    <button mat-button mat-dialog-close>Close</button>
</div> -->
</ng-template>
</ion-content>
